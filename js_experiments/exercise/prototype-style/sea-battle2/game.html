<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="utf-8">

	<title>Sea Battle v_3</title>
	<meta name="description" content="">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Template Basic Images Start -->
	<meta property="og:image" content="path/to/image.jpg">
<!-- 	<link rel="icon" href="img/favicon/favicon.ico">
	<link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon-180x180.png"> -->
	<!-- Template Basic Images End -->
	
	<!-- Custom Browsers Color Start -->
	<meta name="theme-color" content="#000">
	<!-- Custom Browsers Color End -->

	<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="libs/bootstrap-4.0.0-dist/css/bootstrap-grid.css">

	<!-- Custom CSS -->
<!-- 	<link rel="stylesheet" href="css/main.css"> -->
	<style>
		body { 
			margin: 0;
		} 
		:-webkit-full-screen #myCanvas {
			width: 100%;
			height: 100%;
		}
	</style>

</head>

<body>
	<!-- Custom HTML -->
	<canvas id="myCanvas" width="640" height="360"></canvas>

<script	type="text/javascript">

var game = {
	width: 640,
	height: 360,
	ctx: undefined,
	backgroundSea: undefined,
	// backgroundSea2: undefined,
	mySubmarine: undefined,
	running: true,
	sprites: {
		backgroundSea: undefined,
		backgroundSky: undefined,
		mySubmarine: undefined,
		enemySubmarine: undefined,
		enemyTorpedo: undefined,
		myTorpedo: undefined
	},

	init: function(){
		var canvas = document.getElementById("myCanvas");
		this.ctx = canvas.getContext("2d");
	},

	load: function(){
		for ( var key in this.sprites ) {
			this.sprites[key] = new Image();
			this.sprites[key].src = 'asset/' + key + '.png';		
		}
	},



	render: function(){
		this.ctx.clearRect(0, 0, this.width, this.height);

		this.ctx.drawImage(this.sprites.backgroundSea, this.backgroundSea.x, this.backgroundSea.y);
	},

	run: function(){
		this.render();
		this.chooseDir();

		if ( this.running ){
			window.requestAnimationFrame(function(){
				game.run();
			});			
		}
	},

	start: function(){
		this.init();
		this.load();
		this.run();
	}
};

game.mySubmarine = {
	width: 78,
	height: 45,
	frame: 0,
	x: 100,
	y: 100,
	velocity: 4,
	animate: function(){
		setInterval(function(){
			++game.mySubmarine.frame;

			if ( game.mySubmarine.frame > 8 ) {
				game.mySubmarine.frame = 0;
			}			
		}, 10);
	},
	chooseDir: function(){
    if(this.isUp)
        this.drawY -=this.velocity;
    if(this.isDown)
        this.drawY +=this.velocity;
    if(this.isRight)
        this.drawX +=this.velocity;
    if(this.isLeft)
        this.drawX -=this.velocity;
	}
 

};

game.backgroundSea = {
	width: 640,
	height: 360,
	x: 0,
	y: 0,
	velocity: 4
};


function checkKeyDown(e){
    var keyID = e.keyCode || e.which;
    var keyChar = String.fromCharCode(keyID);
    
    if(keyChar == "W"){
        game.mySubmarine.isUp = true;
        e.preventDefault();
    }
    if(keyChar == "S"){
        game.mySubmarine.isDown = true;
        e.preventDefault();
    }
    if(keyChar == "D"){
        game.mySubmarine.isRight = true;
        e.preventDefault();
    }
    if(keyChar == "A"){
        game.mySubmarine.isLeft = true;
        e.preventDefault();
    }
}
 
function checkKeyUp(e){
    var keyID = e.keyCode || e.which;
    var keyChar = String.fromCharCode(keyID);
    
    if(keyChar == "W"){
        game.mySubmarine.isUp = false;
        e.preventDefault();
    }
    if(keyChar == "S"){
        game.mySubmarine.isDown = false;
        e.preventDefault();
    }
    if(keyChar == "D"){
        game.mySubmarine.isRight = false;
        e.preventDefault();
    }
    if(keyChar == "A"){
        game.mySubmarine.isLeft = false;
        e.preventDefault();
    }

}


window.addEventListener('load', function(){
	game.start();
});

</script>
</body>
</html>